SRC = $(wildcard *.c)

# file names for executables generated by gcc and custom compiler
CC_EXE = $(patsubst %.c, %_gcc, $(SRC))
CUSTOM_CC_EXE = $(patsubst %.c, %_custom_cc, $(SRC))

# compilers
CC = gcc
CUSTOM_CC = ../compiler

all: $(CC_EXE) $(CUSTOM_CC_EXE)

# converts .c files to executables using gcc
%_gcc : %.c
	$(CC) -g $< -o $@

# converts .c files to executables using custom compiler 
%_custom_cc : %.c
	$(CUSTOM_CC) -f $< -o $<.s
	$(CC) $<.s -g -o $@

clean:
	rm *_custom_cc *_gcc *debug*  *.s
	
